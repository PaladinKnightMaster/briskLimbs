{% extends 'layout.html' %}

{% block content %}
    
<div class="content-wrapper bg-light">
  <div class="col-12 grid-margin">
	<h4>Admin Dashboard</h4>
    {% for message in messages %}
      <div class="alert alert-success">{{message}}</div>
    {% endfor %}

    {% for error in _errors %}
      <div class="alert alert-danger">{{error}}</div>
    {% endfor %}
    
    <div class="card">
  		<div class="card-body">
    		<h4 class="card-title mb-5">Statistics</h4>
    		<ul class="nav nav-tabs" id="myTab" role="tablist">
				  <li class="nav-item">
				    <a class="nav-link active" id="uploads-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Uploads</a>
				  </li>
				  <li class="nav-item">
				    <a class="nav-link" id="conversion-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Conversion</a>
				  </li>
				  <li class="nav-item">
				    <a class="nav-link" id="registrations-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Registrations</a>
				  </li>
				</ul>
				<div class="tab-content" id="myTabContent">
				  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="uploads-tab">
				  	<div id="total-uploads" style="height: 300px; width: 100%;"></div>
				  	<div id="total-uploads-week" style="height: 300px; width: 100%;"></div>
				  	<div id="total-uploads-week-before" style="height: 300px; width: 100%;"></div>
				  	<div id="total-uploads-month" style="height: 300px; width: 100%;"></div>
				  	<div id="total-uploads-month-before" style="height: 300px; width: 100%;"></div>
				  </div>
				  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="conversion-tab">b</div>
				  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="registrations-tab">c</div>
				</div>
    	</div>
  	</div>

  </div>
</div>
<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script type="text/javascript">
	window.onload = function () {
		var chart = new CanvasJS.Chart("total-uploads", {
			animationEnabled: true,
			theme: "light2", // "light1", "light2", "dark1", "dark2"
			title:{
				text: "Uploads Comparison"
			},
			axisY: {
				title: "Uploads"
			},
			data: [{        
				type: "column",  
				showInLegend: true, 
				legendMarkerColor: "grey",
				legendText: "Total Uploads",
				dataPoints: [      
					{ y: {{stats.uploads.yesterday}}, label: "Yesterday" },
					{ y: {{stats.uploads.today}}, label: "Today" },
				]
			}]
		});
		chart.render();

		var chart = new CanvasJS.Chart("total-uploads-week", {
			animationEnabled: true,
			theme: "light2", // "light1", "light2", "dark1", "dark2"
			title:{
				text: "Uploads Last Week"
			},
			axisY: {
				title: "Uploads"
			},
			data: [{        
				type: "column",  
				showInLegend: true, 
				legendMarkerColor: "grey",
				legendText: "Total Uploads",
				dataPoints: {{stats.uploads.last_week|raw}}
			}]
		});
		chart.render();

		var chart = new CanvasJS.Chart("total-uploads-week-before", {
			animationEnabled: true,
			theme: "light2", // "light1", "light2", "dark1", "dark2"
			title:{
				text: "Uploads Before Last Week"
			},
			axisY: {
				title: "Uploads"
			},
			data: [{        
				type: "column",  
				showInLegend: true, 
				legendMarkerColor: "grey",
				legendText: "Total Uploads",
				dataPoints: {{stats.uploads.before_last_week|raw}}
			}]
		});
		chart.render();

		var chart = new CanvasJS.Chart("total-uploads-month", {
			animationEnabled: true,
			theme: "light2", // "light1", "light2", "dark1", "dark2"
			title:{
				text: "Uploads Last Month"
			},
			axisY: {
				title: "Uploads"
			},
			data: [{        
				type: "column",  
				showInLegend: true, 
				legendMarkerColor: "grey",
				legendText: "Total Uploads",
				dataPoints: {{stats.uploads.last_month|raw}}
			}]
		});
		chart.render();

		var chart = new CanvasJS.Chart("total-uploads-month-before", {
			animationEnabled: true,
			theme: "light2", // "light1", "light2", "dark1", "dark2"
			title:{
				text: "Uploads Before Last Month"
			},
			axisY: {
				title: "Uploads"
			},
			data: [{        
				type: "column",  
				showInLegend: true, 
				legendMarkerColor: "grey",
				legendText: "Total Uploads",
				dataPoints: {{stats.uploads.before_last_month|raw}}
			}]
		});
		chart.render();
	}
</script>
<!-- content-wrapper ends -->
        
        
{% endblock %}
